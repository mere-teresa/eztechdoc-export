<div id="page">
<div id="main" class="aui-page-panel">
<div id="main-header">
<div id="breadcrumb-section">
1.  [Developer](index.html)
2.  [Documentation](Documentation_31429504.html)
3.  [Migrating to eZ Platform - Follow the Ibex!](31429532.html)
4.  [Coming to eZ Platform from eZ Publish
    Platform](Coming-to-eZ-Platform-from-eZ-Publish-Platform_31429598.html)
5.  [Upgrading from 5.4.x and 2014.11 to
    16.xx](Upgrading-from-5.4.x-and-2014.11-to-16.xx_31430322.html)

</div>
**Developer : Migrating legacy Page field (ezflow) to Landing Page
(Enterprise)**

</div>
<div id="content" class="view">
<div class="page-metadata">
Created by Dominika Kurek, last modified by Sarah Haïm-Lubczanski on Jan
30, 2017

</div>
<div id="main-content" class="wiki-content group">
<div class="contentLayout2">
<div class="columnLayout two-right-sidebar"
data-layout="two-right-sidebar">
<div class="cell normal" data-type="normal">
<div class="innerCell">
To move your legacy Page field / eZ Flow configuration to eZ Platform
Enterprise Edition you can use a script that will aid in the migration
process.

The script will automatically migrate only data – to move custom views,
layouts, blocks etc., you will have to provide their business logic
again.

<div
class="confluence-information-macro confluence-information-macro-warning">
<div class="confluence-information-macro-body">
The migration script will operate on your current database.

Make sure to **back up your database** in case of an unexpected error.

</div>
</div>
 

To use the script, do the following:

<div
class="confluence-information-macro confluence-information-macro-note">
<div class="confluence-information-macro-body">
Make a note of the paths to .ini files which define your legacy blocks.
You will need these paths later.

</div>
</div>
**1.** Add `ezflow-migration-toolkit` to `composer.json` in your clean
Platform installation.

<div class="code panel pdl" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl"
style="border-bottom-width: 1px;">
**composer.json**

</div>
<div class="codeContent panelContent pdl">
``` {.sourceCode .brush:}
"ezsystems/ezflow-migration-toolkit": "^1.0.0"
```

</div>
</div>
**2.** Add `ezflow-migration-toolkit` to `AppKernel.php`.

<div class="code panel pdl" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl"
style="border-bottom-width: 1px;">
**AppKernel.php**

</div>
<div class="codeContent panelContent pdl">
``` {.sourceCode .brush:}
new EzSystems\EzFlowMigrationToolkitBundle\EzSystemsEzFlowMigrationToolkitBundle()
```

</div>
</div>
**3.** Clear cache.

<div class="code panel pdl" style="border-width: 1px;">
<div class="codeContent panelContent pdl">
``` {.sourceCode .brush:}
app/console cache:clear
```

</div>
</div>
**4.** Run the script with the following parameters:

-   absolute path of your legacy application
-   list of .ini files which define your legacy blocks

<div class="code panel pdl" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl"
style="border-bottom-width: 1px;">
**Script command**

</div>
<div class="codeContent panelContent pdl">
``` {.sourceCode .brush:}
app/console ezflow:migrate <legacy path> —ini=<block definitions> [—ini=<another block definition> ...]
```

</div>
</div>
<div class="code panel pdl" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl"
style="border-bottom-width: 1px;">
**Example of the migration script command**

</div>
<div class="codeContent panelContent pdl">
``` {.sourceCode .brush:}
app/console ezflow:migrate /var/www/legacy.application.com/ —ini=extension/myapplication/settings/block.ini.append.php
```

</div>
</div>
**5.** You will be warned about the need to create a backup of your
database. **Proceed only if you are sure you have done it.**

<div
class="confluence-information-macro has-no-icon confluence-information-macro-information">
<div class="confluence-information-macro-body">
A `MigrationBundle` will be generated in the `src/` folder.

You will see a report summarizing the results of the migration.

</div>
</div>
**6.** Add `MigrationBundle` to `AppKernel.php`.

<div class="code panel pdl" style="border-width: 1px;">
<div class="codeHeader panelHeader pdl"
style="border-bottom-width: 1px;">
**AppKernel.php**

</div>
<div class="codeContent panelContent pdl">
``` {.sourceCode .brush:}
new MigrationBundle\MigrationBundle()
```

</div>
</div>
**7.** Clear cache again.

 

At this point you can already view the initial effects of the migration,
but they will still be missing some of your custom content.

The `MigrationBundle` generates placeholders for layouts in the form of
frames with a data dump.

For blocks that could not be mapped to existing Landing Page blocks, it
will also generate PHP file templates that you need to fill with your
own business logic.

 

</div>
</div>
<div class="cell aside" data-type="aside">
<div class="innerCell">
 

</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer" role="contentinfo">
<div class="section footer-body">
Document generated by Confluence on Mar 24, 2017 17:20

<div id="footer-logo">
[Atlassian](http://www.atlassian.com/)

</div>
</div>
</div>
</div>

